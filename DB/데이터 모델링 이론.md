10-08-2023

# <데이터 모델링 이론>

데이터 모델링이란? 데이터의 구조를 설계하는 것(데이터를 읽고 쓰기 위한 모델을 만드는 것)

1. 개념 : 업무 분석
2. 논리 : 업무 설계
3. 물리 : 기술 구현

## ER 모델(Entity-Relationship Model)
: 표현하고자 하는 현실 세계의 업무를 개체(또는 실체, Entity)와 관계(Relationship)라는 두 가지 개념으로 표현하는 모델이다.
비교적 개념이 이해하기 쉽고 모델을 확장할 수 있어서 데이터베이스 설계를 위한 데이터 모델 중에서 가장 널리 활용되고 있다.
ER 모델은 개체와 개체 간의 관계를 ER 표기법을 사용하여 표현한다.
ERD(Entity-Relationship Diagram)는 ER  모델에서 사용하는 실체와 관계를 도식화한 것으로, 실체와 이들 간의 관계를 알기 쉽도록 미리 약속한 도형을 사용하여 표현한 것이다.

## ER 모델의 질적 특성
: 완전성(Completeness) : ER 모델은 현실 세계의 모든 업무적인 요구사항을 표현하고 있어야 한다. 
: 정확성(Correctness) : ER 모델의 개념대로 데이터 모델을 작성해야 한다. 엔티티 대신 속성을 사용하지 않아야 하고,슈퍼타입 관계를 명확히 해야 한다.
슈퍼타입과 서브타입 사이의 상속(Inheritance)을 표현하고, 관계와 관련된 개별 엔티티를 명확히 정의해야 한다. 관계 대신 엔티티를 사용하지 않아야 하고, 실체의 식별자를 명확히 해야 한다.
카디널리티(Cardinallity)와 옵셔널리티(opitonality)를 명확하게 표현해야 한다.
: 최소성(Minimalitiy) : 요구사항의 모든 특성이 ER 모델에 한 번만 나타나도록 설계해야 한다. 중복이 나타난다면 중복 데이터(Derived Data)를 반드시 문서화해야 한다.
: 자명성(Self-explanation) : 별도 보조자료 없이 설명이나 증명을 하지 않아도 요구사항에 대한 뜻이나 의미를 명확히 설명할 수 있어야 한다.
: 확장성(Extensibility) :  향후 업무 범위나 규모가 확대되거나 변경될 경우 새로운 요구사항을 쉽게 반영할 수 있도록 유연한 모델을 설계해야 한다.
: 표현성(Expressiveness) : 추가적인 설명 없이도 ER 모델의 의미를 쉽게 이해할 수 있또록 명확하게 설계해야 한다.
: 가독성(Readibility) : ER 모델을 읽기 쉽고 그 뜻을 쉽게 알아차릴 수 있도록 표현해야 한다.


## ER 모델 구성 요소 : 엔티티(Entity), 관계(Relationship), 속성(Attribute) + 식별자(Identifier, 속성과 관계 중 하나 이상의 조합으로 구성됨)

## * 엔티티(Entity)
: 주문, 계약처럼 실체와 실체 간의 관계에 해당하는 엔티티를 포함한다. 엔티티는 적어도 둘 이상의 인스턴스가 존재할 수 있어야 한다.
최소한 둘 이상의 속성이 있어야 하고, 반드시 각 인스턴스를 식별할 수 있는 속성이나 관계가 하나 이상 정의되어야 한다.
우리가 일반적으로 얘기하는 엔티티는 정확히 말하면 엔티티 타입인데, 엔티티는 엔티티타입의 실체(인스턴스)에 해당한다.
예를 들면 고객은 엔티티타입이고, 고객인 '유동오'는 엔티티이다. 일반적으로 엔티티와 엔티티타입을 구분하지 않고 엔티티로 통칭하여 사용한다.
엔티티는 슈퍼타입(부모)이나 서브타입(자식)으로 확장할 수 있다.

### * 일반화(Generalization)
: 엔티티 각각이 가지고 있는 고유한 특징을 일반화하여 공통의 속성으로 재정의한 것이다.
엔티티 일반화는 두 개 이상의 하위 수준(개인고객과 법인고객) 엔티티를 결합하여 상위 수준(고객)의 엔티티로 통합하는 상향식 접근 방식이다.
일반화는 인스턴스 존재 유형에 따라 완전/불완전, 배타적/포괄적 일반화로 나눌 수 있다.
일반화 유형이 상위 수준 엔티티(슈퍼타입)의 모든 인스턴스가 하위 수준 엔티티(서브타입)의 인스턴스에 모두 존재하느냐 일부만 존재하느냐에 따라 완전 일반화와 불완전 일반화로 나눌 수 있다.
상위 수준 엔티티의 모든 인스턴스가 하위 수준 엔티티 중 하나에만 존재한다면 배타적 일반화이고, 둘 이상의 하위 엔티티에 속한다면 포괄적 일반화에 해당한다.
예를 들어, 사람을 성별로 구분할 경우 남자나 여자 둘 중 하나에는 반드시 존재하므로 완전 일반화이고, 남자나 여자 둘 중 하나만 속해야 하므로 배타적이다.
학교 구성원의 하위 수준 엔티티를 교수와 학생으로 구분할 경우 교직원을 포함하지 않을므로 불완전한 집합이 되고, 교수이면서 학생이 될 수 있으므로 포괄적인 성격을 가지게 된다.


10-09-2023

### * 특수화(Specialization)
: 일반화의 반대 개념으로, 하나의 상위 수준 엔티티를 두 개 이상의 하위 수준 엔티티로 분할하는 하향식 접근 방식이다.
일반적으로 슈퍼타입을 정의하고, 서브타입과 속성을 정의한 후 관계를 정의한다.

### * 집단화(Aggregation)
: 여러 엔티티의 집합으로 하나의 또다른 엔티티를 정의하는 것을 뜻한다.
하나의 엔티티로 취급되는 두개 의 엔티티 사이에서 나타나며, 해당 엔티티와의 관계가 상위 수준 엔티티로 대체된다.

### * 엔티티의 분류
1. 엔티티 관계에 따라서 강한(Strong) 엔티티 - 약한(Weak) 엔티티로 나눈다.
강한 엔티티는 독립적으로 존재하며, 엔티티 내에서 자체 식별자를 사용하여 고유하게 인스턴스를 식별할 수 있는 엔티티다. 고객, 상품 등이 해당된다.
약한 엔티티는 다른 엔티티에 종속적이고, 자체 식별자를 가지지 못하고, 다른 엔티티의 식별자를 상속받아 사용하는 엔티티다. 주문상품이 해당되는데, 이는 주문번호 속성을 주문에서 상속받아 식별자로 사용한다.
2. 엔티티 형태에 따라서 독립(Kernel, Master) - 업무중심(Transaction) - 종속(Dependent) - 교차(Associative, Relative) 엔티티로 분류한다.
독립 엔티티 : 사람, 물건(대상), 장소, 개념처럼 원래부터 현실에 존재하는 엔티티다. 고객, 상품, 창고, 조직 등
* 업무중심 엔티티 : 업무를 처리하면서 발생하는 데이터에 해당하는 엔티티이고, 주제영역에서 가장 핵심이 되는 엔티티로 통상 주제영역 이름과 동일하거나 비슷한 의미의 이름을 갖는다. 주문, 결제, 배송, 청구 등
* 종속 엔티티 : 주로 업무중심 엔티티에서 1차 정규화로 인해 분리된 엔티티에 해당한다. 주문상품, 주문배송 엔티티는 주문엔티티가 있어야 존재할 수 있는 엔티티이며, 주문 엔티티의 종속 엔티티에 해당된다.
* 교차 엔티티 : 두 개 이상의 엔티티 간에 발생하는 트랜잭션에 의해 생성되는 엔티티다. 고객과 역할 간의 관계 엔티티인 고객역할 엔티티처럼 대부분 논리 모델링에서 다대다 관계를 해소하기 위해 도출된다.
3. 엔티티 생성 관점에 따라서 핵심(Key) - 중요(Main) - 행위(Action) 엔티티로 구분한다.
* 핵심 엔티티 : 고객, 상품, 조직처럼 자신의 부모 엔티티를 갖지 않는 독립적이며 핵심적인 엔티티다.
* 중요 엔티티 : 핵심 엔티티 간의 거래 관계에 의해 생성되는 엔티티이지만, 업무의 핵심이 되는 엔티티다. 계약은 고객과 상품의 거래 관계에 의해 생성되며, 고객과 상품을 부모로 갖는다.
* 행위 엔티티 : 실제 업무 행위에 있어서 지속해서 발생하는 거래 행위에 대한 엔티티다. 청구내역 엔티티는 중요 엔티티에 해당하는 계약에 의해 지속해서 발생하는 데이터를 관리하는 엔티티에 해당한다.
4. 엔티티 형태에 따라서 실체(Tangible) - 비실체(Intangible) 엔티티로 나누고, 비실체 엔티티는 개념 - 사건(Event)로 나눈다.
* 실제 엔티티 : 고객, 상품과 같이 눈으로 볼 수 있는 물리적인 형태를 가지는 엔티티다.
* 개념 엔티티 : 조직, 보험상품, 서비스 등 물리적인 형태는 없으나 개념적으로 존재하는 비실체 엔티티다.
* 사건 엔티티 : 계약, 주문, 결제 등과 같이 업무 행위와 관련된 비실체 엔티티이며, 데이터가 빈번하게 생성되고 변경됭는 특성이 있다.


10-12-2023
## * 관계(Relationship)
: 엔티티와 엔티티 간에 존재하는 업무 규칙을 정의하고, 엔티티 간에 어떤 관계가 이루어질 수 있는지 표현한다.
1. 관계수(cardinality) : 어떤 엔티티의 인스턴스 하나가 다른 엔티티 몇 개(1,M)의 인스턴스와 대응될 수 있는지를 표시한 것으로, 상대 엔티티 쪽에 까마귀 발로 표시한다. 최대 인스턴스 수와 관련이 있다.
2. 선택성(optionality) : 어떤 엔티티 인스턴스에 대해 상대 엔티티에 인스턴스가 반드시 존재해야 하는지(Mandatory), 존재하지 않아도 되는지(Optional) 표시한다. 최소 인스턴스 수와 관련이 있다.
3. 식별자 상속(Indetifier Inheritance) : 엔티티 간의 관계를 정의하면서 엔티티의 식별자를 다른 엔티티에서 상속받을 때 식별자로 상속받을지(식별관계), 일반 속성으로 상속받을지(비식별관계) 표시한다.
4. 관계명(Relationship Name) : 관계의 의미나 이름을 표시한다. 의미를 명확하게 표시한다는 측면에서 양쪽에 모두 기술하기도 하며, 관계선만으로도 의미가 통하는 경우 이름을 생략해도 무방하다.

### 1. 관계수
엔티티와 엔티티 간의 대응되는 최대 인스턴스의 수이며 일대일(1:1), 일대다(1:M), 다대다(M:N) 3가지 유형이 있다.
* 1:1 관계 : 엔티티 개체 하나가 다른 엔티티 개체 하나와 관계를 가지는 경우
* 1:M 관계 : 엔티티 개체 하나가 다른 엔티티 개체 여러 개와 관련이 있음
* M:N 관계 : 어떤 엔티티 개체 하나가 다른 엔티티 개체 여러 개와 관련이 있고, 다른 엔티티 개체 하나는 어떤 엔티티 개체 여러 개와 관계가 있음

### 2. 관계 선택성(Optionality)
: 엔티티 인스턴스에 대해 상대 엔티티 인스턴스 존재 유무를 나타내며, 양쪽 필수 - 한쪽 필수 - 양쪽 선택으로 나누어진다.
* 필수-필수 관계 : 어떤 엔티티의 인스턴스에 대해 다른 엔티티 인스턴스가 반드시 존재해야 하고, 다른 엔티티의 인스턴스에 대해 어떤 엔티티의 인스턴스도 반드시 존재해야 한다.
예를 들어 상품을 선택하지 않고 주문을 하는 경우는 없으므로, 주문은 주문상품이 반드시 존재해야 하고 반대의 경우도 마찬가지다.
* 필수-선택 관계 : 어떤 엔티티의 인스턴스에 대해 다른 엔티티 인스턴스가 존재하지 않아도 되고, 다른 엔티티 인스턴스에 대해 어떤 엔티티 인스턴스는 반드시 존재해야 한다.
예를 들어 주문하지 않은 고객은 있을 수 있으나, 모든 주문은 반드시 주문한 고객이 있어야 한다.
* 선택-선택 관계 : 어떤 엔티티 인스턴스에 대해 다름 엔티티 인스턴스가 존재하지 않아도 되고, 다른 엔티티 인스턴스에 대해 어떤 엔티티 인스턴스도 존재하지 않아도 된다. 종속 관계보다는 단순 참조 관계일 때 자주 나타난다. 예를 들어 사원은 소개사원으로 등록된 계좌가 존재하지 않을 수 있고, 고객이 펀드 상품에 가입할 때 소개 사원을 지정하지 않아도 되므로 계좌는 소개 사원이 없을 수 있다.

### 3. 식별자 상속
: 식별 관계와 비식별 관계로 구분할 수 있다. 식별 관계는 참조되는 상위 엔티티 식별자가 참조하는 하위 엔티티 식별자로 상속되는 경우이고, 비식별 관계는 식별자가 아닌 일반 속성으로 상속되는 관계이다.
정보공학 표기법에서 식별 관계는 라운드 있는 엔티티 형태로 표시하고, 비식별 관계는 사각형 모양 엔티티로 표시한다.

### 4. 관계 유형
: 기본 관계, 재귀적 관계, 병렬 관계, 슈퍼타입/서브타입 관계 등
* 기본 관계 : 엔티티와 엔티티가 하나의 관계를 맺는다. 가장 일반적인 관계이고, 1:1 또는 1:M 관계에 해당한다.
* 재귀적 관계 : 하나의 엔티티가 다른 엔티티가 아닌 자기 자신과 관계를 맺는 경우 재귀적 관계 또는 순환 관계라고 한다. 계층적인 구조를 표현하는 데 유용한 특징이 있고 Mandatory 관계가 불가하며 반드시 Optional 관계를 갖는다.
* 병렬 관계 : 엔티티와 엔티티 간에 두 개 이상의 관계를 맺는다. 
* 슈퍼타입/서브타입 관계 : 공통 속성을 관리하는 슈퍼타입 엔티티와 개별 속성을 관리하는 서브타입 엔티티는 배타적/포괄적인 관계를 가진다. 슈퍼타입 엔티티인 고객은 서브타입에 해당하는 개인이나 법인 둘 중 하나에 반드시 속한다.
* 배타적인 관계 : 엔티티가 두 개 이상의 다른 엔티티의 합집합과 관계를 가질 때 배타적인 관계 또는 아크(Arc) 관계라고 한다. 동일한 의미를 가지는 관계에 대해 서로 가른 하나 이상 엔티티와 관계를 통합할 때 발생한다.

### 5. 관계 차원
: 관계에 참여하는 엔티티의 수를 의미한다. 단항 관계, 이항 관계, 삼항 관계, n항 관계가 있고 삼항관계 이상은 잘 나타나지 않는다.
* 단항 관계 : 부서 엔티티 내에서 부서와 상위 부서 관계처럼 하나의 엔티티 내에 존재하는 관계를 말한다.
* 이항 관계 : 부서와 사원, 고객과 주문 등 두 개 엔티티 간의 관계에 해당하며, 가장 일반적인 형태의 관계다.
* 삼항 관계 : 흔하게 나타나는 편은 아니다. 


10-13-2023
## * 속성(Attribute)
: 데이터를 표현하는 가장 작은 단위, 속성이 가지는 의미를 통해 엔티티 특성이나 상태를 알 수 있다. 하나의 엔티티는 두 개 이상의 속성을 가지며, 속성명, 식별자여부, 옵셔널리티, 도메인 등으로 구성된다.
### * 속성명
: 실체의 특성을 규정하는 속성 명칭으로 주문번호, 주문 일자 등 업무에서 일반적으로 사용하는 용어를 사용하거나, 속성 의미를 명확하게 표현할 수 있도록 함축성 있는 명사를 사용하여 명명한다.
### * 식별자 여부
: 해당 속성이 엔티티 식별자에 해당하는지 표시한다. 고객 번호는 주민등록번호나 사업자등록번호 등으로 식별한 고객에 대해 인위적으로 부여한 식별자에 해당한다.
### * 옵셔널리티
: 엔티티에 인스턴스가 발생할 때 해당 속성이 반드시 특정 값을 가져야 하는지에 대한 구분으로, Mandatory(반드시 값을 가져야 함), Optional(값을 갖지 않아도 됨), Conditional(특정 조건에 해당하는 경우에는 반드시 값을 가져야 함)로 구분된다. 고객 등록시 고객 식별자(주민등록번호 등)와 고객명은 필수로 입력해야 하고, 주소, 이메일은 선택사항으로 할 수 있다.
### * 도메인
: 속성이 허용하는 데이터 형식과 범위를 가지고 있으며, 문자형, 숫자형, 날짜형 등이 있다. 

10-15-2023

### 속성은 속성 값의 구성이나 성격에 따라 다양하게 분류할 수 있다.
#### * 단순 속성과 복합 속성
: 단순 속성은 고객명, 이메일 등 속성을 더 분해할 수 없는 원자 값을 갖는다. 복합 속성은 단순 속성들의 조합으로 구성된다. 주소는 단순 속성인 기본주소와 상세주소로 구성되어 있다. 단순 속성과 복합 속성은 개념(이론)적인 구분이며, 실제 모델링에서는 입무 요건이나 모델링 툴의 제약 등으로 복합 속성도 단순 속성으로 분리하여 표현하는 경우도 많고, 단순 속성과 복합 속성을 구분하기 애매한 경우도 많다. 
#### * 저장 속성과 파생 속성
: 저장 속성은 원래 존재하는 속성이다. 저장 속성이나 다른 파생 속성으로부터 파생된 속성이 파생 속성이다. 파생 속성에 해당하는 주문금액은 저장 속성인 상품 단가와 주문수량을 곱하여 계산된 속성이고, 근속연수는 입사일자와 현재 일자로부터 산출할 수 있다. 
파생 속성은 성능적인 목적 등 특수한 경우를 제외하고는 별도로 도출하지 않는 것이 일반적이다. 하지만, 파생 속성으로 판단하여 속성으로 도출하지 않는 경우 데이터를 재현할 수 있는지 다시 한 번 확인해야 한다.
#### * 단일 값 속성과 다중 값 속성
: 단일 값 속성은 성별, 생일처럼 사원에 대해 하나의 값만 가지는 속성을 의미하며, 다중 값 속성은 하나의 속성이 여러 개의 값을 가지는 속성을 말한다. 사원은 취미를 여러 개 가질 수 있으므로 취미 속성은 다중 값 속성에 해당한다. 다중 값 속성은 모델링 과정에서 정규화를 통해 별도 엔티티로 분리된다.

### 식별자(Identifier)
: 식별자는 주문 엔티티의 주문번호처럼 엔티티에서 인스턴스를 개별적으로 식별할 수 있는 속성(들)이다. 자체 속성들의 조합이거나 주문상품의 식별자가 주문 엔티티에서 상속받은 주문번호와 상품번호로 구성된 것처럼 부모 엔티티와의 관계를 통해 상속된 식별자와 자체 식별자를 조합하여 정의할 수 있다.
식별자의 특징으로 유일성, 최소성, 불변성, 존재성이 있다.
1) 유일성(Uniqueness): 사원 엔티티의 사원번호 속성처럼 엔티티의 모든 인스턴스를 유일하게 식별할 수 있어야 한다.
2) 최소성(Minimum): 식별자를 구성하는 속성은 유일성을 만족하는 최소 속성으로 구성해야 한다.
3) 불변성(Stability): 일단 엔티티의 식별자를 지정하면 그 식별자의 값은 변하지 않아야 한다.
4) 존재성(Mandatory): 식별자는 반드시 데이터 값이 존재해야 한다.(Not Null)

: 식별자는 실 세계(업무)에서 자연적으로 가지는 특성인지 시스템에서 필요에 의해 추가한 속성인지에 따라 본질 식별자와 인조 식별자로 나눌 수 있다. - 고유 속성 여부에 따름
본질 식별자는 주민등록번호나 사원번호처럼 실 세계(업무)에서 일반적으로 통용되는 식별자이고, 인조 식별자는 주문일련번호나 입출금일련번호처럼 업무에서 사용하지 않지만, 데이터를 효율적으로 관리하기 위해 별도로 추가한 식별자를 말한다.
대표성 여부에 따라 주 식별자와 대체(보조) 식별자(주 식별자를 대체함)로 분류할 수도 있다. 주 식별자와 대체 식별자는 상대적인 개념이다. 만약 사원번호가 주 식별자라면 주민등록번호가 대체 식별자가 되고, 주민등록번호가 주 식별자라면 사원번호가 대체 식별자가 될 수 있는 것이다. 